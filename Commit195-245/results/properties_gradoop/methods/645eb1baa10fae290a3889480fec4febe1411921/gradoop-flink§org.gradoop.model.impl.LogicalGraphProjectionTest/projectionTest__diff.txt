@Test                                                                                                  @Test                                                                                               
public void projectionTest() throws Exception {                                                        public void projectionTest() throws Exception {                                                     
LogicalGraph&lt;DefaultVertexData, DefaultEdgeData, DefaultGraphData&gt; forumGraph = getGraphStore(   LogicalGraph&lt;DefaultVertexData, DefaultEdgeData, DefaultGraphData&gt; forumGraph = getGraphStore(
LogicalGraph&lt;DefaultVertexData, DefaultEdgeData, DefaultGraphData&gt; newGraph = forumGraph.proje   LogicalGraph&lt;DefaultVertexData, DefaultEdgeData, DefaultGraphData&gt; newGraph = forumGraph.proje
Comparator&lt;Vertex&lt;Long, DefaultVertexData&gt;&gt; vertexComp = new Comparator&lt;Vertex&lt;Lon | List&lt;DefaultVertexData&gt; oldVertices = Lists.newArrayList();                                   
                                                                                                     | List&lt;DefaultEdgeData&gt; oldEdges = Lists.newArrayList();                                        
@Override                                                                                            | List&lt;DefaultVertexData&gt; newVertices = Lists.newArrayList();                                   
public int compare(Vertex&lt;Long, DefaultVertexData&gt; vertex1, Vertex&lt;Long, DefaultVertexData& | List&lt;DefaultEdgeData&gt; newEdges = Lists.newArrayList();                                        
return Long.compare(vertex1.getId(), vertex2.getId());                                               | forumGraph.getVertexData().output(new LocalCollectionOutputFormat&lt;&gt;(oldVertices));            
}                                                                                                    | forumGraph.getEdgeData().output(new LocalCollectionOutputFormat&lt;&gt;(oldEdges));                 
};                                                                                                   | newGraph.getVertexData().output(new LocalCollectionOutputFormat&lt;&gt;(newVertices));              
Comparator&lt;Edge&lt;Long, DefaultEdgeData&gt;&gt; edgeComp = new Comparator&lt;Edge&lt;Long, Defau | newGraph.getEdgeData().output(new LocalCollectionOutputFormat&lt;&gt;(newEdges));                   
                                                                                                     | getExecutionEnvironment().execute();                                                                
@Override                                                                                            | Collections.sort(oldVertices, new VertexComparator());                                              
public int compare(Edge&lt;Long, DefaultEdgeData&gt; edge1, Edge&lt;Long, DefaultEdgeData&gt; edge2) | Collections.sort(newVertices, new VertexComparator());                                              
return Long.compare(edge1.getValue().getId(), edge2.getValue().getId());                             | Collections.sort(oldEdges, new EdgeComparator());                                                   
}                                                                                                    | Collections.sort(newEdges, new EdgeComparator());                                                   
};                                                                                                   |                                                                                                     
List&lt;Vertex&lt;Long, DefaultVertexData&gt;&gt; oldVertices = forumGraph.getGellyGraph().getVertic |                                                                                                     
Collections.sort(oldVertices, vertexComp);                                                           |                                                                                                     
List&lt;Edge&lt;Long, DefaultEdgeData&gt;&gt; oldEdges = forumGraph.getGellyGraph().getEdges().colle |                                                                                                     
Collections.sort(oldEdges, edgeComp);                                                                |                                                                                                     
List&lt;Vertex&lt;Long, DefaultVertexData&gt;&gt; newVertices = newGraph.getGellyGraph().getVertices |                                                                                                     
Collections.sort(newVertices, vertexComp);                                                           |                                                                                                     
List&lt;Edge&lt;Long, DefaultEdgeData&gt;&gt; newEdges = newGraph.getGellyGraph().getEdges().collect |                                                                                                     
Collections.sort(newEdges, edgeComp);                                                                |                                                                                                     
assertNotNull("graph was null", newGraph);                                                             assertNotNull("graph was null", newGraph);                                                          
assertEquals(forumGraph.getVertexCount(), newGraph.getVertexCount());                                | assertEquals(oldVertices.size(), newVertices.size());                                               
assertEquals(forumGraph.getEdgeCount(), newGraph.getEdgeCount());                                    | assertEquals(oldEdges.size(), newEdges.size());                                                     
assertEquals(forumGraph.getLabel(), newGraph.getLabel());                                              assertEquals(forumGraph.getLabel(), newGraph.getLabel());                                           
assertEquals(forumGraph.getProperties(), newGraph.getProperties());                                    assertEquals(forumGraph.getProperties(), newGraph.getProperties());                                 
for (int i = 0; i &lt; newVertices.size(); i++) {                                                      for (int i = 0; i &lt; newVertices.size(); i++) {                                                   
Vertex&lt;Long, DefaultVertexData&gt; oldVertex = oldVertices.get(i);                                | DefaultVertexData oldVertex = oldVertices.get(i);                                                   
Vertex&lt;Long, DefaultVertexData&gt; newVertex = newVertices.get(i);                                | DefaultVertexData newVertex = newVertices.get(i);                                                   
assertEquals(oldVertex.getId(), newVertex.getId());                                                    assertEquals(oldVertex.getId(), newVertex.getId());                                                 
assertEquals(oldVertex.getValue().getProperties(), newVertex.getValue().getProperties());            | assertEquals(oldVertex.getProperties(), newVertex.getProperties());                                 
assertEquals(newVertex.getValue().getLabel(), "test_label");                                         | assertEquals(newVertex.getLabel(), "test_label");                                                   
}                                                                                                      }                                                                                                   
for (int i = 0; i &lt; newEdges.size(); i++) {                                                         for (int i = 0; i &lt; newEdges.size(); i++) {                                                      
Edge&lt;Long, DefaultEdgeData&gt; oldEdge = oldEdges.get(i);                                         | DefaultEdgeData oldEdge = oldEdges.get(i);                                                          
Edge&lt;Long, DefaultEdgeData&gt; newEdge = newEdges.get(i);                                         | DefaultEdgeData newEdge = newEdges.get(i);                                                          
assertEquals(oldEdge.getValue().getId(), newEdge.getValue().getId());                                | assertEquals(oldEdge.getId(), newEdge.getId());                                                     
assertEquals(oldEdge.getValue().getLabel(), newEdge.getValue().getLabel());                          | assertEquals(oldEdge.getLabel(), newEdge.getLabel());                                               
assertEquals(newEdge.getValue().getProperties().get("test_property"), "test_value");                 | assertEquals(newEdge.getProperties().get("test_property"), "test_value");                           
assertNull(newEdge.getValue().getProperties().get(PROPERTY_KEY_SINCE));                              | assertNull(newEdge.getProperties().get(PROPERTY_KEY_SINCE));                                        
}                                                                                                      }                                                                                                   
}                                                                                                      }                                                                                                   
