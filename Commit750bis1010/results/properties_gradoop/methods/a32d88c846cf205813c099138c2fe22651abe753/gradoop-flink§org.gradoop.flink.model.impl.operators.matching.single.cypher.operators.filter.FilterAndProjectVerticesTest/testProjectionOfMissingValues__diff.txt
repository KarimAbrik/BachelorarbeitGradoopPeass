@Test
public void testProjectionOfMissingValues() throws Exception {
    CNF predicates = predicateFromQuery("MATCH (a) WHERE a.name = \"Alice\"");
    Properties properties = Properties.create();
    properties.set("name", "Alice");
    EPGMVertex person = new EPGMVertexFactory().createVertex("Person", properties);
    DataSource<EPGMVertex> vertices = getExecutionEnvironment().fromElements(person);
    List<String> projectionPropertyKeys = Lists.newArrayList("name", "age");
    Embedding result = new FilterAndProjectVertices<>(vertices, predicates, projectionPropertyKeys).evaluate().collect().get(0);
    assertEquals(person.getId(), result.getId(0));
    assertEquals(result.getProperty(0), PropertyValue.create("Alice"));
    assertEquals(result.getProperty(1), PropertyValue.NULL_VALUE);
}